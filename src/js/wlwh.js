(function(window){var wlwh={};wlwh.init=function(){};function httpRequest(obj,successfun,errFun){var xmlHttp=null;if(window.XMLHttpRequest){xmlHttp=new XMLHttpRequest}else{if(window.ActiveXObject){xmlHttp=new ActiveXObject("Microsoft.XMLHTTP")}}if(xmlHttp==null){alert("浏览器不支持xmlHttp");return}var httpMethod=(obj.method||"Get").toUpperCase();var httpDataType=obj.dataType||"json";var httpUrl=obj.url||"";var async=true;if(httpMethod=="POST"){var data=obj.data||{};var requestData="";for(var key in data){requestData=requestData+key+"="+data[key]+"&"}if(requestData==""){requestData=""}else{requestData=requestData.subString(0,requestData.length-1)}}xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4){if(xmlHttp.status==200){successfun(JSON.parse(xmlHttp.responseText))}else{errFun}}};if(httpMethod=="GET"){xmlHttp.open("GET",httpUrl,async);xmlHttp.send(null)}else{if(httpMethod=="POST"){xmlHttp.open("POST",httpUrl,async);xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xmlHttp.send(requestData)}}}wlwh.appendBox=function(obj){httpRequest({method:"GET",url:"http://120.79.132.229:8090/advertising/open/getData?appId="+obj.appId+"&appSecret="+obj.appSecret,data:{}},function(res){if(res.code==0){var type=res.data.generalizeType;var title=res.data.advertisingName;var imgList;var imgHtml="";var href=res.data.href;var id=res.data.advertisingId;if(res.data.adverisingType==1){if(res.data.url.indexOf(",")!=-1){imgList=res.data.url.split(",");for(var i=0;i<imgList.length;i++){imgHtml+="<div style='flex:1;margin:0 3px;'><img src='"+imgList[i]+"' style='width:100%;height:100%;'/></div>"}}else{imgHtml+="<div style='flex:1;margin:0 3px;'><img src='"+res.data.url+"' style='max-width:100%;max-height:160px;margin-left: 50%;transform: translateX(-50%);float: left'/></div>"}}else{if(res.data.adverisingType==2){imgHtml+="<div style='flex:1;margin:0 3px;text-align: center;'><video style='margin-left: 50%;transform: translateX(-50%);float: left;max-height: 200px;max-width:100%;' autoplay='autoplay' muted loop preload><source src='"+res.data.url+"' type='video/mp4'>你的浏览器不支持video</source></video></div>"
}}var template="<div id='wlwh_to_page"+obj.boxId+"'style='width:100%;background:#f7f7f7;box-sizing: border-box;position: relative;'><div style='display:flex;width:100%;height:100%;background: url(http://articleimage.oss-cn-beijing.aliyuncs.com/20190806/2e5be65997314ab3ada9dcb1a47f37ea.jpg) no-repeat;background-size: 100% 100%;'>"+imgHtml+"</div><p style='width:88%;margin-left: 20px;line-height:40px;font-weight:bold;font-size:14px;color:#000000;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;'>"+title+"</p><div style='position:absolute;right:0;bottom:0;background:#666;color:#fff;font-size:12px;padding:1px 5px;'>广告</div></div>";var boxId=document.querySelector("#"+obj.boxId);boxId.innerHTML=template;document.querySelector("#wlwh_to_page"+obj.boxId).addEventListener("click",function(){httpRequest({method:"GET",url:"http://120.79.132.229:8090/advertising/open/statisticsData?id="+id+"&appId="+obj.appId+"&appSecret="+obj.appSecret,data:{}},function(res){if(res.code==0){window.location.href=href}})})}})};window.wlwh=wlwh})(window,undefined);
